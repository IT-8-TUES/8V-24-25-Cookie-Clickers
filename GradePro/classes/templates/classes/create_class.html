{% extends "base.html" %}
{% load static %}

{% block title %}Create Class{% endblock %}

{% block content %}
<div class="container">
    <h2>Create a New Class</h2>
    
    <form method="post">
        {% csrf_token %}
        <div>
            <label for="id_subject">Subject:</label>
            {{ form.subject }}
        </div>
        
        <div>
            <label for="student-search">Search Students:</label>
            <input type="text" id="student-search" placeholder="Search by name..." onkeyup="filterStudents()">
        </div>

        <div id="student-list" style="max-height: 300px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; margin-top: 10px;">
            {% for student in form.students_checkbox %}
                <div class="student-entry">
                    {{ student.tag }} {{ student.choice_label }}
                </div>
            {% endfor %}
        </div>

        <button type="submit">Create Class</button>
    </form>
</div>

<script>
    function filterStudents() {
        const input = document.getElementById('student-search').value.toLowerCase();
        const entries = document.querySelectorAll('.student-entry');
        entries.forEach(entry => {
            const text = entry.textContent.toLowerCase();
            entry.style.display = text.includes(input) ? 'block' : 'none';
        });
    }
</script>
{% endblock %}
